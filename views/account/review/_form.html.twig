{{forms.begin('review','','post',{ 'class':'form-horizontal' }) }}
{# Begin identity #}
<fieldset>
    <legend>Identity</legend>
    <div class="form-group">
        <label class="control-label col-sm-3 col-md-2 col-lg-2" for="input1">First Name
            <span class="text-danger">*</span>
        </label>
        <div class="col-sm-9 col-md-5 col-lg-5">
            {{ forms.text('review[first_name]',review.first_name, {class:'form-control parsley-validated', placeholder:"First Name", required:true}) }}
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-5 col-lg-5">
            <div class="validation">{{ forms.errorlist(form_errors, 'first_name') }}</div>
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-sm-3 col-md-2 col-lg-2" for="input1">Email
            <span class="text-danger">*</span>
        </label>
        <div class="col-sm-9 col-md-5 col-lg-5">
            {{ forms.text('review[email]',review.email, {class:'form-control parsley-validated', placeholder:"Email", required:true}) }}
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-5 col-lg-5">
            <div class="validation">{{ forms.errorlist(form_errors, 'email') }}</div>
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-sm-3 col-md-2 col-lg-2" for="input1">City
            <span class="text-danger">*</span>
        </label>
        <div class="col-sm-9 col-md-5 col-lg-5">
            {{ forms.text('review[city]',review.city, {class:'form-control parsley-validated', placeholder:"City", required:true}) }}
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-5 col-md-offset-0 col-lg-5">
            <div class="validation">{{ forms.errorlist(form_errors, 'city') }}</div>
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-sm-3 col-md-2 col-lg-2" for="input1">State/Province
            <span class="text-danger">*</span>
        </label>
        <div class="col-sm-9 col-md-5 col-lg-5">
            {{ forms.text('review[state]',review.state, {class:'form-control parsley-validated', placeholder:"State/Province", required:true}) }}
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-5 col-md-offset-0 col-lg-5">
            <div class="validation">{{ forms.errorlist(form_errors, 'state') }}</div>
        </div>
    </div>
</fieldset>
{# End identity #}
{# Begin review #}
<fieldset>
    <legend>Review Text</legend>
    <div class="form-group">
        <label class="control-label col-sm-3 col-md-2 col-lg-2" for="input1">Title
            <span class="text-danger">*</span>
        </label>
        <div class="col-sm-9 col-md-5 col-lg-5">
            {{ forms.text('review[title]',review.title, {class:'form-control parsley-validated', placeholder:"Title", required:true}) }}
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-5 col-md-offset-0 col-lg-5">
            <div class="validation">{{ forms.errorlist(form_errors, 'title') }}</div>
        </div>
    </div>
    
    <div class="form-group">
        <label class="control-label col-sm-3 col-md-2 col-lg-2" for="input1">Comment
            <span class="text-danger">*</span>
        </label>
        <div class="col-sm-9 col-md-5 col-lg-5">
            {{ forms.textarea('review[comment]',review.comment, {class:'form-control parsley-validated', placeholder:"Comment", required:true}) }}
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-5 col-md-offset-0 col-lg-5">
            <div class="validation">{{ forms.errorlist(form_errors, 'comment') }}</div>
        </div>
    </div>
</fieldset>
{# End review #}
{# Begin ratings #}
<fieldset>
    <legend>Ratings</legend>
    <div class="form-group">
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 col-lg-10 col-lg-offset-2">
            {{ forms.rating('score', review.score,'glyphicon-star') }}
        </div>
    </div>
</fieldset>
{# End ratings #}
{# Begin actions #}
<div class="form-group">
    <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 col-lg-10 col-lg-offset-2">
        <div class="actions">
            {% if create %}
            {{ forms.submit('review[action]', 'create', 'Create', {class:'btn btn-primary'})}}
            {% else %}
            {{ forms.submit('review[action]', 'save', 'Save', {class:'btn btn-primary'})}}
            <a class="btn btn-link btn-link-nopadding" data-toggle="modal" data-target="#delete-modal">Delete this review</a>
            {% endif %}
        </div>
    </div>
</div>
{# End actions #}
{{ form.end() }}
<div class="modal fade" id="delete-modal" tabindex="-1" role="dialog" aria-labelledby="delete-modal-label" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="delete-modal-label">Delete "{{review.title}}"?</h4>
            </div>
            <div class="modal-body">
              Are you sure you want to delete "{{ review.title }}"?
            </div>
            <div class="modal-footer">
                <a class="btn btn-default" data-dismiss="modal">Cancel</a> 
                <a class="btn btn-danger" href="{{ app.request.base}}/{{app.request.url|replace({'edit': 'delete'}) }}">Delete</a> 
            </div>
        </div>
    </div>
</div>